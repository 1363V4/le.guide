---
title: a good class - part 2
layout: post
---

**note:** this is part 1 in a series of posts about oop. link to
[part 1](https://blog.legires.fr/2025/11/15/good_class.html)

---

i asked claude what he thought about my previous article and...

![claude](/img/class/claude.png)

now, the good thing with ai roasting is that it cannot quit the conversation.
you can continue to trade blows.

and we continued until i realised...

## claude is right

**there are no good classes.**

i tried saving the idea as hard as i could,
but all my points were moot.

let's review them:

immutability? you don't get that.
even with `frozen`, if your class has a list, won't work...

the `read()` function?
claude is right, it's an overcomplicated setter
+ string matching so horrid performance...

`slots` won't improve your control over your data structure,
hot data, block size:
you're better off with an `array`...

the `property` check?
yeah but why would you want that?

why would you want give up on the ability
to freely compose it whenever you want,
whenever you need?

in other words:

## data is just data

and it belongs in a database.

not in a class, in a **database**.

*your code shouldn't have state and your data shoudn't have behaviors.*

or as they say in the video [overwatch architecture](https://www.youtube.com/watch?v=Ks98kE3cs30):

> systems have no state, components have no behavior

here it is.
we're gonna talk about **entity component system**.
ecs in short.

## e-c-s, baby

i mentioned 
[the array library](https://docs.python.org/fr/3/library/array.html)
earlier.
because i love python,
and i try to write it **as a c wrapper**
as much as possible.

and i'm not gonna ruin it by writing classes, no no no.

so what is ecs?

in one sentence:

> a struct of array instead of an array of structs

in one picture:

![ecs](/img/class/ecs.png)

if it didn't click for you, here is some homework:
- [ecs megathread](https://skypjack.github.io/2019-02-14-ecs-baf-part-1/)
- [sparse/dense indexing](https://skypjack.github.io/2020-08-02-ecs-baf-part-9/)
- [data locality](https://gameprogrammingpatterns.com/data-locality.html)
- [observer pattern](https://en.wikipedia.org/wiki/Observer_pattern)

## the last nail in oop's coffin

i'll leave you now with one very important quote.

while trying to argue that classes could work
for *some* use cases with delaney
(who's way nicer than claude, surprisingly),
i tried the:

> what if you only need it once? just once!
> for fixed parameters! we have tools for that,
> but what should we use? enums, named tuples?
> dataclass with frozen and slots?

and the master said:

> if you think you're gonna need it once, **you're wrong.**

and the student was enlightened.

start with an array of length 1.
it's gonna become 2 soon enough.

input control? you're gonna netcode it.
config file? you're gonna have a test environment.
camera system? what about a killcam?

it's arrays all the way down.

so start with them.
then you'll build structs.
of arrays. not arrays of structs.

oop *feels* organized.
to you.

but to your cpu, not that much.

---

before we dive into practical ecs,
a little detour in the next post.

next up: orm.
